#!/bin/bash

# Remove old symlinks
rm ~/{.bashrc,.bash_profile,.vimrc,.git-prompt.sh,git-completion.bash,.tmux.conf}

# Bash stuff
ln -sv ${PWD}/bash/git-completion.bash ~
ln -sv ${PWD}/bash/.bashrc ~
ln -sv ${PWD}/bash/.bash_profile ~
ln -sv ${PWD}/bash/.bash_completion.d ~
ln -sv ${PWD}/bash/.git-prompt.sh ~

# tmux
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
ln -sv ${PWD}/tmux/.tmux.conf ~
tmux source ~/.tmux.conf

# Vim setup
mkdir -p ~/.vim/after/ftplugin/
ln -sv ${PWD}/vim/.vimrc ~
ln -sv ${PWD}/vim/c.vim ~/.vim/after/ftplugin/
ln -sv ${PWD}/vim/cpp.vim ~/.vim/after/ftplugin/
ln -sv ${PWD}/vim/go.vim ~/.vim/after/ftplugin/
# Install Vim plugins
vim -S vim/setup.vim

# Apply Mac specific settings and packages.
if [ "`uname -a | grep -i darwin`" ]; then
    # Decrease key repeat speed to 0
    defaults write NSGlobalDomain KeyRepeat -int 0

    brew install git
    brew install bash-completion
    brew install tree
    brew install python
    brew install socat
    # For tmux system clipboard copy.
    brew install reattach-to-user-namespace
fi
